<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ê—É–¥–∏–æ –ï–ª–µ–Ω–æ–≤–∏—á–∞</title>
<style>
  body {
    background-color: #080D17;
    color: #fff;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 { margin-bottom: 20px; font-size: 1.5em; }

  .player {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 8px;
    padding: 15px;
    background: rgba(0,0,0,0.3);
    max-width: 400px;
    width: 100%;
  }

  .controls {
    display: flex;
    gap: 10px;
  }

  .controls button {
    background: none;
    border: 1px solid rgba(255,255,255,0.5);
    color: #fff;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 0.9em;
  }

  .controls button:hover {
    background: rgba(255,255,255,0.1);
  }

  .progress-container {
    width: 100%;
    height: 6px;
    background: rgba(255,255,255,0.2);
    border-radius: 3px;
    cursor: pointer;
    margin-top: 10px;
    position: relative;
  }

  .progress {
    width: 0%;
    height: 100%;
    background: #fff;
    border-radius: 3px;
    transition: width 0.1s linear;
  }

  .track-list {
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-top: 10px;
    width: 100%;
  }

  .track-list div {
    cursor: pointer;
    font-size: 0.9em;
    padding: 2px 5px;
    border-radius: 3px;
    overflow: hidden;
    white-space: nowrap;
    position: relative;
  }

  .track-list div.active {
    background: rgba(255,255,255,0.2);
  }

  .back-link {
    margin-top: 15px;
  }
  .back-link a {
    color: #9cf;
    text-decoration: none;
  }
  .back-link a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

<h1>–ê—É–¥–∏–æ –ï–ª–µ–Ω–æ–≤–∏—á–∞</h1>

<div class="player">
  <audio id="audio"></audio>

  <div class="controls">
    <button id="prev">‚óÄ</button>
    <button id="playPause">‚ñ∂</button>
    <button id="next">‚ñ∂‚ñ∂</button>
    <button id="mute">üîá</button>
  </div>

  <div id="progressContainer" class="progress-container">
    <div id="progress" class="progress"></div>
  </div>

  <div class="track-list" id="trackList"></div>
</div>

<p class="back-link">
  <a href="index.html">–≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
</p>

<script>
  const tracks = [
    {title: "Elenovich - lustra", src: "audio/Elenovich-lustra.mp3"},
    {title: "Elenovich ‚Äî Mea vido", src: "audio/Elenovich ‚Äî Mea vido.mp3"},
    {title: "Elenovich ‚Äî Ok, Msk", src: "audio/Elenovich ‚Äî Ok, Msk.mp3"},
    {title: "Elenovich - Ra", src: "audio/Elenovich - Ra.mp3"}
  ];

  const audio = document.getElementById('audio');
  const playPauseBtn = document.getElementById('playPause');
  const nextBtn = document.getElementById('next');
  const prevBtn = document.getElementById('prev');
  const muteBtn = document.getElementById('mute');
  const trackListEl = document.getElementById('trackList');
  const progressContainer = document.getElementById('progressContainer');
  const progress = document.getElementById('progress');

  let current = 0;
  let isDragging = false;

  function loadTrack(index, autoplay = false) {
    current = index;
    audio.src = tracks[current].src;
    updateActiveTrack();
    if (autoplay) audio.play();
  }

  function updateActiveTrack() {
    const items = trackListEl.querySelectorAll('div');
    items.forEach((el, i) => {
      el.classList.toggle('active', i === current);
      el.textContent = tracks[i].title;
    });
  }

  function togglePlayPause() {
    if (audio.paused) {
      if (!audio.src) loadTrack(0, true);
      else audio.play();
      playPauseBtn.textContent = '‚è∏';
    } else {
      audio.pause();
      playPauseBtn.textContent = '‚ñ∂';
    }
  }

  function nextTrack() { loadTrack((current + 1) % tracks.length, true); }
  function prevTrack() { loadTrack((current - 1 + tracks.length) % tracks.length, true); }
  function toggleMute() { audio.muted = !audio.muted; }

  playPauseBtn.onclick = togglePlayPause;
  nextBtn.onclick = nextTrack;
  prevBtn.onclick = prevTrack;
  muteBtn.onclick = toggleMute;

  // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤
  tracks.forEach((t, i) => {
    const div = document.createElement('div');
    div.textContent = t.title;
    div.onclick = () => loadTrack(i, true);
    trackListEl.appendChild(div);
  });

  updateActiveTrack();

  // –ê–≤—Ç–æ-–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç—Ä–µ–∫—É
  audio.onended = nextTrack;
  audio.onplay = () => playPauseBtn.textContent = '‚è∏';
  audio.onpause = () => playPauseBtn.textContent = '‚ñ∂';

  // –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
  audio.ontimeupdate = () => {
    if (audio.duration && !isDragging) {
      progress.style.width = (audio.currentTime / audio.duration) * 100 + '%';
    }
  };

  progressContainer.addEventListener('click', (e) => {
    const rect = progressContainer.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    audio.currentTime = (clickX / rect.width) * audio.duration;
  });

  progressContainer.addEventListener('mousedown', () => { isDragging = true; });
  document.addEventListener('mouseup', () => { isDragging = false; });

  document.addEventListener('mousemove', (e) => {
    if (isDragging && audio.duration) {
      const rect = progressContainer.getBoundingClientRect();
      let pos = e.clientX - rect.left;
      pos = Math.max(0, Math.min(rect.width, pos));
      audio.currentTime = (pos / rect.width) * audio.duration;
    }
  });
</script>

</body>
</html>
