<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>elenovich.lol</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <video class="background-video" autoplay muted playsinline>
    <source src="media/videointro.mp4" type="video/mp4">
  </video>

  <header>
    <a href="index.html" class="logo">
      <img src="images/logo-icon.png" alt="logo" class="logo-icon" />
      elenovich.lol
    </a>
  </header>

  <main class="home-main fade-in-delayed">
    <div class="poem-list-wrapper">
      <ul class="poem-list">
        <li>• <a href="mea_vido.html">Mea vido</a></li>
        <li>• <a href="komarinaya.html">Комариная</a></li>
        <li>• <a href="pribeval.html">Приступ бешенства в алмазах</a></li>
        <li>• <a href="silverdeath.html">Сильверная</a></li>
        <li>• <a href="sentimentdefleur.html">Sentiment de fleur</a></li>
        <li>• <a href="tiaad.html">This is an ass deal</a></li>
        <li>• <a href="belo.html">Мне всё это бело</a></li>
        <li>• <a href="schg.html">СЧГ</a></li>
        <li>• <a href="№3,33(3).html">№3,33(3)</a></li>
        <li>• <a href="tamcel.html">Там целовала меня агония</a></li>
        <li>• <a href="cvetamyat.html">Губы</a></li>
        <li>• <a href="bitriboi.html">Быть рыбой</a></li>
        <li>• <a href="uvorot.html">Уворот</a></li>
        <li>• <a href="yokoono.html">Ну же</a></li>
        <li>• <a href="beliestra.html">Белые страдания</a></li>
        <li>• <a href="malchik.html">Мальчик</a></li>
        <li>• <a href="perepel.html">Убийство перепела</a></li>
        <li>• <a href="avtoportret.html">Автопортрет жилья</a></li>
        <li>• <a href="tsurugi.html">К Тцуруги</a></li>
        <li>• <a href="netdoma.html">Камень</a></li>
        <li>• <a href="svechka.html">Свечка</a></li>
        <li>• <a href="luna.html">Ликантропия</a></li>
        <li>• <a href="jusya.html">Жуся</a></li>
        <li>• <a href="lora.html">Ларисе, матери моей матери</a></li>
        <li>• <a href="otchenash.html">Я побуду</a></li>
        <li>• <a href="sovokupnostmashin.html">Совокупность машин</a></li>
        <li>• <a href="mistiki.html">Мистики</a></li>
      </ul>
    </div>
  </main>

  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-copy">
        <a href="index.html" class="footer-link">© 2025 elenovich.lol</a>
      </div>
      <div class="telegram-block">
        <img src="images/tg.jpg" alt="Telegram image" class="tg-pic">
        <a href="https://t.me/epistoria" target="_blank" class="tg-link">TG</a>
      </div>
    </div>
  </footer>
<script>
  if (window.innerWidth <= 600) {
    const wrapper = document.querySelector('.poem-list-wrapper');
    const list = document.querySelector('.poem-list');

    // Удаляем флаг при закрытии вкладки
    window.addEventListener('pagehide', () => {
      localStorage.removeItem('poemAutoScrolled');
    });

    const referrer = document.referrer;
    const isFromPoem = referrer.includes('elenovich.lol') && referrer.endsWith('.html');

    if (!localStorage.getItem('poemAutoScrolled') && !isFromPoem) {
      // затемнение + спиннер
      const overlay = document.createElement('div');
      overlay.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
        background: rgba(0, 0, 0, 0.85); display: flex;
        justify-content: center; align-items: center; z-index: 9999;
      `;

      const spinner = document.createElement('div');
      spinner.style.cssText = `
        width: 50px; height: 50px; border: 5px solid #fff;
        border-top: 5px solid transparent; border-radius: 50%;
        animation: spin 1s linear infinite;
      `;
      overlay.appendChild(spinner);
      document.body.appendChild(overlay);

      const style = document.createElement('style');
      style.textContent = `
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `;
      document.head.appendChild(style);

      // клон списка
      const clone = list.cloneNode(true);
      wrapper.appendChild(clone);

      const singleListHeight = list.offsetHeight;
      wrapper.scrollTop = 0;

      let scrollPos = 0;
      const scrollStep = 1;
      const duration = 3000; // 3 секунды
      const interval = 10; // интервал между шагами
      const totalSteps = duration / interval;
      const maxScroll = singleListHeight;
      const stepSize = maxScroll / totalSteps;

      function spinScroll(callback) {
        let step = 0;
        const loop = setInterval(() => {
          scrollPos += stepSize;
          wrapper.scrollTop = scrollPos;
          step++;

          if (scrollPos >= singleListHeight || step >= totalSteps) {
            clearInterval(loop);
            callback();
          }
        }, interval);
      }

      spinScroll(() => {
        localStorage.setItem('poemAutoScrolled', 'true');

        const items = list.querySelectorAll('li a');
        const randomIndex = Math.floor(Math.random() * items.length);
        const randomLink = items[randomIndex].href;

        setTimeout(() => {
          window.location.href = randomLink;
        }, 500); // небольшая задержка перед переходом
      });

      wrapper.addEventListener('scroll', () => {
        const scrollTop = wrapper.scrollTop;
        if (scrollTop >= singleListHeight) {
          wrapper.scrollTop = 0;
        }
        if (scrollTop <= 0) {
          wrapper.scrollTop = singleListHeight - 1;
        }
      });
    }
  }
</script>
</body>
</html>
