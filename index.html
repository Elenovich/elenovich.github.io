<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>elenovich.lol</title>
  <meta name="description" content="Стихи и творчество Еленовича. Официальный сайт elenovich.lol — здесь слова, буквы и я — поэт." />
  <link rel="stylesheet" href="style.css" />
  <style>
    .random-button {
      background: none;
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: rgba(255, 255, 255, 0.7);
      padding: 6px 12px;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .random-button:hover {
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }

    .random-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }

    @media (min-width: 768px) {
      .poem-random-layout {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: flex-start;
        gap: 40px;
      }

      .random-wrapper {
        margin-top: 0;
        align-items: flex-start;
        position: relative;
        top: 10px;
      }
    }
  </style>
</head>
<body>
  <video class="background-video" autoplay muted playsinline>
    <source src="media/videointro.mp4" type="video/mp4" />
  </video>

  <header>
    <a href="index.html" class="logo">
      <img src="images/logo-icon.png" alt="logo" class="logo-icon" />
      elenovich.lol
    </a>
  </header>

  <main class="home-main fade-in-delayed">
    <div class="poem-random-layout">
      <div class="poem-list-wrapper">
        <ul class="poem-list">
          <li>• <a href="mea_vido.html">Mea vido</a></li>
          <li>• <a href="komarinaya.html">Комариная</a></li>
          <li>• <a href="pribeval.html">Приступ бешенства в алмазах</a></li>
          <li>• <a href="silverdeath.html">Сильверная</a></li>
          <li>• <a href="sentimentdefleur.html">Sentiment de fleur</a></li>
          <li>• <a href="tiaad.html">This is an ass deal</a></li>
          <li>• <a href="belo.html">Мне всё это бело</a></li>
          <li>• <a href="schg.html">СЧГ</a></li>
          <li>• <a href="№3,33(3).html">№3,33(3)</a></li>
          <li>• <a href="tamcel.html">Там целовала меня агония</a></li>
          <li>• <a href="cvetamyat.html">Губы</a></li>
          <li>• <a href="bitriboi.html">Быть рыбой</a></li>
          <li>• <a href="uvorot.html">Уворот</a></li>
          <li>• <a href="yokoono.html">Ну же</a></li>
          <li>• <a href="beliestra.html">Белые страдания</a></li>
          <li>• <a href="malchik.html">Мальчик</a></li>
          <li>• <a href="perepel.html">Убийство перепела</a></li>
          <li>• <a href="avtoportret.html">Автопортрет жилья</a></li>
          <li>• <a href="tsurugi.html">К Тцуруги</a></li>
          <li>• <a href="netdoma.html">Камень</a></li>
          <li>• <a href="svechka.html">Свечка</a></li>
          <li>• <a href="luna.html">Ликантропия</a></li>
          <li>• <a href="jusya.html">Жуся</a></li>
          <li>• <a href="lora.html">Ларисе, матери моей матери</a></li>
          <li>• <a href="otchenash.html">Я побуду</a></li>
          <li>• <a href="sovokupnostmashin.html">Совокупность машин</a></li>
          <li>• <a href="mistiki.html">Мистики</a></li>
          <li>• <a href="estprekr.html">Эстетика прекрасного</a></li>
          <li>• <a href="estvrat.html">Эстетика отвратительного</a></li>
          <li>• <a href="estnochestvo.html">Эстетика одиночества</a></li>
          <li>• <a href="furazhka.html">Фуражка</a></li>
          <li>• <a href="apostol.html">Апостол или дурак</a></li>
          <li>• <a href="niognya.html">Ни меня, ни тебя</a></li>
          <li>• <a href="eho.html">Эхо</a></li>
          <li>• <a href="timyan.html">Тимьян</a></li>
          <li>• <a href="pautin.html">Па у тин</a></li>
        </ul>
      </div>
      <div class="random-wrapper">
        <button class="random-button" onclick="goToRandomPoem()">Рандомный стих</button>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-copy">
        <a href="index.html" class="footer-link">© 2025 elenovich.lol</a>
      </div>
      <div class="telegram-block">
        <img src="images/tg.jpg" alt="Telegram image" class="tg-pic" />
        <a href="https://t.me/epistoria" target="_blank" class="tg-link">TG</a>
      </div>
    </div>
  </footer>

<script>
  const wrapper = document.querySelector('.poem-list-wrapper');
  const list = document.querySelector('.poem-list');

  const originalListHTML = list.innerHTML;
  const itemHeight = list.children[0].offsetHeight;
  const itemCount = list.children.length;

  // Визуальный дубликат — без участия пользователя
  list.innerHTML += originalListHTML;

  let scrollTop = 0;
  const fullHeight = list.scrollHeight / 2;

  // Настройка времени
  const totalDuration = 5000;
  const decelerationStart = 4000;
  const frameRate = 1000 / 60;

  let startTime = null;

  function animateScroll(timestamp) {
    if (!startTime) startTime = timestamp;
    const elapsed = timestamp - startTime;

    let progress = elapsed / totalDuration;

    // Сначала быстрая прокрутка, потом замедление
    let speed;
    if (elapsed < decelerationStart) {
      speed = 4; // быстро
    } else {
      // замедление к нулю
      const slowProgress = (elapsed - decelerationStart) / (totalDuration - decelerationStart);
      speed = 4 * (1 - slowProgress); // линейное замедление
    }

    scrollTop += speed;
    if (scrollTop >= fullHeight) {
      scrollTop -= fullHeight; // сброс на начало
    }

    wrapper.scrollTop = scrollTop;

    if (elapsed < totalDuration) {
      requestAnimationFrame(animateScroll);
    } else {
      // остановка в случайной точке
      const maxVisible = Math.floor(wrapper.clientHeight / itemHeight);
      const randomOffset = Math.floor(Math.random() * itemCount) * itemHeight;

      scrollTop = randomOffset % fullHeight;
      wrapper.scrollTop = scrollTop;
    }
  }

  requestAnimationFrame(animateScroll);

  // Рандомная кнопка
  function goToRandomPoem() {
    const links = list.querySelectorAll('li:nth-child(-n=' + itemCount + ') a');
    const urls = Array.from(links).map(link => link.getAttribute('href'));
    const randomUrl = urls[Math.floor(Math.random() * urls.length)];
    if (randomUrl) {
      window.location.href = randomUrl;
    }
  }
</script>
</body>
</html>
